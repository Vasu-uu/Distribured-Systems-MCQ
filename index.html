<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Distributed Systems MCQ Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .option-radio:checked + label {
            background-color: #3b82f6; 
            color: #ffffff; 
            border-color: #2563eb; 
        }
        .option-radio {
            display: none; 
        }
        
        .option-radio:disabled + label {
            color: #6b7280; 
            cursor: not-allowed;
        }
        
        label.feedback-correct {
            background-color: #dcfce7; 
            border-color: #22c55e !important; 
            color: #15803d; 
            font-weight: 600; 
        }
        label.feedback-incorrect {
            background-color: #fee2e2; 
            border-color: #ef4444 !important; 
            color: #b91c1c; 
            font-weight: 600; 
        }
        
        .option-radio:checked + label.feedback-correct,
        .option-radio:checked + label.feedback-incorrect {
             color: #1f2937; 
        }
        .option-radio:checked + label.feedback-correct {
             background-color: #bbf7d0; 
             color: #15803d;
        }
        .option-radio:checked + label.feedback-incorrect {
             background-color: #fecaca; 
             color: #b91c1c;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-900 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-4xl mx-auto bg-white shadow-2xl rounded-2xl overflow-hidden">
        
        <div id="start-screen" class="p-6 md:p-12">
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-gray-800 mb-8 text-center">Distributed Systems Quiz</h1>
            <p class="text-base sm:text-lg text-gray-600 mb-8 text-center">
                Select a quiz to start. You will get immediate feedback for each answer.
            </p>
            
            <h2 class="text-2xl font-semibold text-gray-700 mb-4">Assignments</h2>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mb-8">
            </div>

            <h2 class="text-2xl font-semibold text-gray-700 mb-4">Full Quiz</h2>
            <button class="start-btn w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-5 sm:py-4 sm:px-6 rounded-lg text-base sm:text-lg transition-all duration-300" data-quiz-id="all">
                All 120 Questions
            </button>
        </div>

        <div id="quiz-screen" class="hidden p-6 md:p-12">
            <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-6">
                <h2 id="quiz-title" class="text-2xl font-bold text-blue-600 mb-2 sm:mb-0">Quiz Title</h2>
                <div class="flex justify-between sm:justify-end sm:gap-6">
                    <div class="text-base sm:text-lg font-semibold text-gray-700">Question <span id="question-number"></span>/<span id="total-questions"></span></div>
                    <div class="text-base sm:text-lg font-semibold text-gray-700">Score: <span id="score" class="text-green-600">0</span></div>
                </div>
            </div>

            <div id="question-text-container" class="text-lg sm:text-xl md:text-2xl font-semibold text-gray-800 mb-8 min-h-[80px] sm:min-h-[100px]"></div>

            <div id="options-container" class="space-y-3 sm:space-y-4">
            </div>

            <div class="mt-8 sm:mt-10 flex justify-between items-center space-x-2 sm:space-x-4">
                <button id="quit-btn" class="flex-shrink-0 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 px-4 sm:py-3 sm:px-6 rounded-lg text-base sm:text-lg transition-all duration-300">
                    Quit
                </button>
                <div class="flex-grow flex justify-end space-x-2 sm:space-x-4">
                    <button id="prev-btn" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 sm:py-3 sm:px-6 rounded-lg text-base sm:text-lg transition-all duration-300 hidden">
                        Previous
                    </button>
                    <button id="next-btn" class="bg-gray-800 hover:bg-gray-900 text-white font-bold py-2 px-6 sm:py-3 sm:px-10 rounded-lg text-base sm:text-lg transition-all duration-300">
                        Submit Answer
                    </button>
                </div>
            </div>
        </div>

        <div id="results-screen" class="hidden p-6 md:p-12">
            <h2 class="text-3xl sm:text-4xl font-bold text-center text-gray-800 mb-4">Quiz Complete!</h2>
            <p class="text-xl sm:text-2xl text-center text-gray-600 mb-8">
                Your Final Score: <span id="final-score" class="text-blue-600 font-bold"></span>
            </p>

            <div class="text-center mb-10">
                <button id="restart-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 sm:py-3 sm:px-8 rounded-lg text-base sm:text-lg transition-all duration-300">
                    Take Another Quiz
                </button>
            </div>

            <h3 class="text-2xl font-semibold text-gray-800 mb-6 border-b pb-2">Review Incorrect Answers</h3>
            <div id="review-container" class="space-y-6 max-h-[60vh] overflow-y-auto pr-2">
            </div>
        </div>
    </div>

    <script>
        const quizData = {
            assignment1: [
                { question: "In a rumor mongering algorithm, there is a/an ____ relationship between the traffic and the residue.", options: ["exponential", "logarithmic", "linear", "quadratic"], correctAnswer: "exponential" },
                { question: "Which of the following statements is/are correct regarding the rumor mongering protocol?\nS1: There is a chance that updates might not reach a node\nS2: It has a built-in termination protocol.", options: ["S1 is true and S2 is true", "S1 is true and S2 is false", "S1 is false and S2 is true", "S1 is false and S2 is false"], correctAnswer: "S1 is true and S2 is true" },
                { question: "In the anti-entropy algorithm, if the number of infected nodes in the system is high, then a________ based algorithm is preferred.", options: ["push", "pull", "push-pull", "pull-push"], correctAnswer: "pull" },
                { question: "In an epidemic protocol, a/an ____ node has not received the update.", options: ["infective", "removed", "injured", "susceptible"], correctAnswer: "susceptible" },
                { question: "Assume an anti-entropy algorithm that distributes an update across ‘n’ nodes. Any node can contact any other node. How much time does this take (approximately, asymptotically)?", options: ["O(n)", "O(log(n))", "O(n2)", "O(n3)"], correctAnswer: "O(log(n))" },
                { question: "Consider the following statements.\nS1: In Napster, a client can provide fake details such as IP addresses.\nS2: In Napster, the main coordination entity handles incoming connections from peers.", options: ["S1 is true and S2 is true", "S1 is true and S2 is false", "S1 is false and S2 is true", "S1 is false and S2 is false"], correctAnswer: "S1 is false and S2 is false" },
                { question: "In Gnutella, the ____ entity manages connections with other Gnutella peers.", options: ["Connection handler", "Co-ordination instance", "Download instance", "Upload instance"], correctAnswer: "Connection handler" },
                { question: "The co-ordination instance in Gnutella sends the ____ message back to the original client after updating the local database with information about remote peers.", options: ["ping", "pong", "search", "client push"], correctAnswer: "pong" },
                { question: "In Napster, a client connects to a/the ____ broker.", options: ["Least busy", "Geographically nearest", "Popular", "Random"], correctAnswer: "Least busy" },
                { question: "Which of the following statements is/are incorrect?", options: ["Gnutella is resilient to network partitions.", "Napster ensures load balancing by finding the best broker.", "Gnutella is scalable due to its distributed architecture.", "None of the options"], correctAnswer: "Gnutella is scalable due to its distributed architecture." }
            ],
            assignment2: [
                { question: "Consider the following statements regarding distributed hash tables (DHTs).\nS1: DHTs provide immunity against node failures due to the usage of extensive data replication.\nS2: DHTs utilizes a dedicated central server to scale with the number of users.", options: ["S1 is true, S2 is false", "S1 is true, S2 is true", "S1 is false, S2 is false", "S1 is false, S2 is true"], correctAnswer: "S1 is true, S2 is false" },
                { question: "The configuration parameter b in the Pastry network affects:", options: ["The number of non-empty entries in the routing table only.", "The number of hops required only.", "The number of non-empty entries in the routing table AND the number of required hops.", "None of the options."], correctAnswer: "The number of non-empty entries in the routing table AND the number of required hops." },
                { question: "While routing a request in Pastry, if the hash of the key (K) is in the range of the node's leaf set (L), then ________.", options: ["forward K to Li such that |K - Li| is minimal.", "forward K to Li such that |K - Li| is maximal.", "forward K to Li such that |K - Li| is negative.", "forward K to any random Li."], correctAnswer: "forward K to Li such that |K - Li| is minimal." },
                { question: "Which of the following is/are the design goals of Freenet?", options: ["Anonymity", "Deniability", "Reliability", "All the options."], correctAnswer: "All the options." },
                { question: "In Freenet, if the insertion of a file leads to a hash collision, then _______.", options: ["it drops the file.", "it passes data back to the upstream requester.", "it passes data to its neighbors.", "it sends data to a subset of nodes from its neighbors."], correctAnswer: "it passes data back to the upstream requester." },
                { question: "Consider the following statements regarding Freenet.\nS1: Information about newly inserted files takes a considerable amount of time to spread across nodes.\nS2: Newly inserted files are placed on nodes with similar keys.", options: ["S1 is true, S2 is false", "S1 is true, S2 is true", "S1 is false, S2 is false", "S1 is false, S2 is true"], correctAnswer: "S1 is false, S2 is true" },
                { question: "In the pre-routing mechanism, a message is encrypted with the _________.", options: ["last node’s private key", "successive node’s public key", "sender's public key", "sender's private key"], correctAnswer: "successive node’s public key" },
                { question: "If a requester receives a Reply.Restart message from downstream nodes in Freenet, then _______.", options: ["It extends its timer.", "It shortens its timer.", "It infers failure.", "It resends the request."], correctAnswer: "It extends its timer." },
                { question: "Which of the following statements is (are) correct regarding the TTL (time-to-live) field in Freenet?", options: ["To reduce the network load, the TTL field can be dynamically decreased.", "Nodes consider the TTL field while deciding the next request to process.", "The TTL field is decremented at every hop", "All the options"], correctAnswer: "All the options" },
                { question: "Which of the following entities is (are) part of the structure of a Pastry node?", options: ["A routing table", "A neighborhood Table", "A leaf set", "All of the options"], correctAnswer: "All of the options" }
            ],
            assignment3: [
                { question: "A _______ maintains a list of peers that contain the different pieces of a file in a BitTorrent network.", options: ["torrent table", "tracker", "swarm", "None of the options"], correctAnswer: "tracker" },
                { question: "Which of the following strategies is employed by the BitTorrent protocol, while downloading a file? [Choose the most appropriate answer]", options: ["A sender will preferentially send data to the nodes that are alive in the network for a longer duration of time.", "A sender prioritizes traffic for those nodes whose network bandwidth is higher.", "A sender will preferentially send data to the nodes that have sent it data in the past.", "All of the options."], correctAnswer: "A sender will preferentially send data to the nodes that have sent it data in the past." },
                { question: "Consider the following statements about the Chord DHT.\nS1: It is not fully distributed.\nS2: It is based on the consistent hashing technique.", options: ["S1 is correct, S2 is incorrect.", "S1 is incorrect, S2 is correct.", "Both S1 and S2 are correct.", "Both S1 and S2 are incorrect."], correctAnswer: "S1 is incorrect, S2 is correct." },
                { question: "In general, the path length in the Chord DHT _______ with the number of nodes.", options: ["grows", "shrinks", "remains the same", "may grow or shrink"], correctAnswer: "grows" },
                { question: "Which of the following tasks is performed by Chord when a node n joins the network? [Choose the most appropriate answer]", options: ["Initialize the predecessor and fingers of node n.", "Update the fingers and predecessors of existing nodes to reflect the addition of n.", "Notify the higher layer software so that it can transfer states (e.g., values) associated with keys that the node is now responsible for.", "All of the options"], correctAnswer: "All of the options" },
                { question: "A Chord node requires information about at least ____ other nodes for efficient routing in an N-node system.", options: ["O(N)", "O(N/2)", "O(log(N))", "O(log(N)2)"], correctAnswer: "O(log(N))" },
                { question: "If a and b are two events and Va and Vb represent the corresponding vector times of these events (using a vector clock), what can be said about the relation between a and b when (Va ≰ Vb) ∧ (Va ≱ Vb)?", options: ["a happens before b (a → b)", "b happened before a (b → a)", "a and b are concurrent (a ⋈ b)", "There is no explicit relation."], correctAnswer: "a and b are concurrent (a ⋈ b)" },
                { question: "In the happens-before-relationship scheme, when process j receives an event a from process i, the clock is updated to _______, where τj and τi are the clocks of process j and i, respectively.", options: ["τj = max(τj + τi (a)) + 1", "τj = τj + 1", "τj = τi (a)", "τj = τi (a) + 1"], correctAnswer: "τj = max(τj + τi (a)) + 1" },
                { question: "Assume that the sender sends a request to a receiver at its local time (t=10), the receiver receives the request at its local time (t=20) and sends a reply at its local time (t=25). The sender receives the reply at its local time (t = 15). Using Cristian’s algorithm, the drift is __ units.", options: ["10 units.", "5 units.", "15 units", "20 units"], correctAnswer: "10 units." },
                { question: "What is a server in the BitTorrent network that hosts a new file and distributes its torrent descriptor file called?", options: ["Leecher", "Peer", "Seeder", "Tracker"], correctAnswer: "Seeder" }
            ],
            assignment4: [
                { question: "Consider the following statements regarding the Chang-Roberts algorithm:\nS1: The number of nodes taking part in the leader election is known a priori.\nS2: Each node is uniquely numbered.", options: ["Both S1 and S2 are true.", "S1 is true, but S2 is false.", "S1 is false, but S2 is true.", "S1 and S2 are both false."], correctAnswer: "S1 is false, but S2 is true." },
                { question: "In the Chang-Robert's leader election algorithm, if node p with state find, receives a message q from its neighbor such that if _______, then it changes the state to lost.", options: ["q = p", "q > p", "q < p", "All the options"], correctAnswer: "q < p" },
                { question: "In the Chang-Robert's algorithm, the message of the leader will propagate across ____ nodes in the ring.", options: ["log(n)", "n", "n-k", "sqrt(n)"], correctAnswer: "n" },
                { question: "In the optimized leader election algorithm with time complexity O(n (log n)), if a node receives (probe, j, k, d) from left such that j < id and d = 2k, then send _____,.", options: ["(probe, j, k, d+1) to right", "(probe, j, k+1, d) to right", "(reply, j, k) to left", "(reply, j, k+1) to right"], correctAnswer: "(reply, j, k) to left" },
                { question: "In a tree-based leader election mechanism, at most _______ messages are sent on every edge.", options: ["Two", "Four", "Eight", "One"], correctAnswer: "Four" },
                { question: "In the Ricart-Agarwala algorithm, a process replies to all pending requests after it _______ the lock.", options: ["releases", "requests", "acquires", "acknowledges."], correctAnswer: "releases" },
                { question: "In the Maekawa’s algorithm, when a process Pj receives a relinquish message from process Pk, it signifies that _________.", options: ["Pk has a low priority.", "Pk has released the lock.", "Pk has received a failed message.", "Pk has not yet acquired the lock."], correctAnswer: "Pk has received a failed message." },
                { question: "In the Suzuki-Kasami algorithm, process Pj sends the token to Pi, if ______.", options: ["seqi[j] = C[i] + 1", "seqj[i] = C[j] + 1", "seqi[j] = C[j] + 1", "seqj[i] = C[i] + 1"], correctAnswer: "seqj[i] = C[i] + 1" },
                { question: "In the Raymond’s tree algorithm, the token is with the ___ of the tree.", options: ["one of the internal node", "one of the leaf node", "root", "random node"], correctAnswer: "root" },
                { question: "Which of the following statements are correct regarding the Raymond’s tree algorithm?\nS1: Circular wait cannot occur because all the nodes wait on the node that holds the token.\nS2: Messages can get lost because all the time a token is held by the root node of the tree.", options: ["S1 is false and S2 is true.", "S1 is true and S2 is false.", "S1 is true and S2 is true.", "S1 is false and S2 is false."], correctAnswer: "S1 is true and S2 is false." }
            ],
            assignment5: [
                { question: "Consider the following statements regarding the minimum spanning tree (MST):\nS1: If each edge of the graph has a unique weight, then the MST is unique.\nS2: If F is a fragment and e is the least weight outgoing edge, then F ∪ e is also a fragment.", options: ["Both S1 and S2 are true.", "S1 is true, but S2 is false.", "S1 is false, but S2 is true.", "S1 and S2 are both false."], correctAnswer: "Both S1 and S2 are true." },
                { question: "In the Gallager Humblet Spira (GHS) algorithm, a fragment joins another fragment by identifying its ______ weight ______ edge.", options: ["least, incoming", "highest, incoming", "highest, outgoing", "least, outgoing"], correctAnswer: "least, outgoing" },
                { question: "When combining two fragments F1 and F2, all the nodes in F1 take on the name and level of F2 if __________.", options: ["level(F1) < level(F2)", "level(F1) > level(F2)", "level(F1) = level(F2)", "All the options"], correctAnswer: "level(F1) < level(F2)" },
                { question: "If a node p receives a < test, level’, name’ > message from node q such that name(p) = name’ and status[q] = basic, then status[q] is set to ____.", options: ["basic", "reject", "branch", "previous value"], correctAnswer: "reject" },
                { question: "In the GHS algorithm, at every level, a node receives ___ messages."        }
        .quiz-stats {
            display: flex;
            justify-content: space-between; /* justify-between */
        }
        .stat-item {
            font-size: 1rem; /* text-base */
            font-weight: 600; /* font-semibold */
            color: #374151; /* text-gray-700 */
        }
        #score {
            color: #16a34a; /* text-green-600 */
        }

        #question-text-container {
            font-size: 1.125rem; /* text-lg */
            font-weight: 600; /* font-semibold */
            color: #1f2937; /* text-gray-800 */
            margin-bottom: 2rem; /* mb-8 */
            min-height: 80px;
        }

        #options-container {
            display: flex;
            flex-direction: column;
            gap: 0.75rem; /* space-y-3 */
        }

        .option-label {
            display: block;
            border: 2px solid #d1d5db; /* border-2 border-gray-300 */
            padding: 1rem; /* p-4 */
            border-radius: 0.5rem; /* rounded-lg */
            cursor: pointer;
            transition-property: all;
            transition-duration: 200ms;
        }
        .option-label:hover {
            border-color: #60a5fa; /* hover:border-blue-400 */
        }

        .button-nav {
            margin-top: 2rem; /* mt-8 */
            display: flex;
            justify-content: space-between; /* justify-between */
            align-items: center; /* items-center */
            gap: 0.5rem; /* space-x-2 */
        }
        #quit-btn {
            flex-shrink: 0;
            background-color: #e5e7eb; /* bg-gray-200 */
            color: #374151; /* text-gray-700 */
            font-weight: 700; /* font-bold */
            padding: 0.5rem 1rem; /* py-2 px-4 */
            border-radius: 0.5rem; /* rounded-lg */
            font-size: 1rem; /* text-base */
            transition-property: all;
            transition-duration: 300ms;
        }
        #quit-btn:hover {
            background-color: #d1d5db; /* hover:bg-gray-300 */
        }
        .nav-buttons-right {
            flex-grow: 1;
            display: flex;
            justify-content: flex-end; /* justify-end */
            gap: 0.5rem; /* space-x-2 */
        }
        .nav-btn {
            color: #ffffff; /* text-white */
            font-weight: 700; /* font-bold */
            padding: 0.5rem 1rem; /* py-2 px-4 */
            border-radius: 0.5rem; /* rounded-lg */
            font-size: 1rem; /* text-base */
            transition-property: all;
            transition-duration: 300ms;
        }
        #prev-btn {
            background-color: #6b7280; /* bg-gray-500 */
        }
        #prev-btn:hover {
            background-color: #4b5563; /* hover:bg-gray-600 */
        }
        #next-btn {
            background-color: #1f2937; /* bg-gray-800 */
            padding-left: 1.5rem; /* px-6 */
            padding-right: 1.5rem;
        }
        #next-btn:hover {
            background-color: #111827; /* hover:bg-gray-900 */
        }

        /* --- Results Screen --- */
        #results-screen {
            padding: 1.5rem; /* p-6 */
        }
        #results-screen h2 {
            font-size: 1.875rem; /* text-3xl */
            font-weight: 700; /* font-bold */
            text-align: center; /* text-center */
            color: #1f2937; /* text-gray-800 */
            margin-bottom: 1rem; /* mb-4 */
        }
        #results-screen p {
            font-size: 1.25rem; /* text-xl */
            text-align: center; /* text-center */
            color: #4b5563; /* text-gray-600 */
            margin-bottom: 2rem; /* mb-8 */
        }
        #final-score {
            color: #2563eb; /* text-blue-600 */
            font-weight: 700; /* font-bold */
        }
        .restart-container {
            text-align: center; /* text-center */
            margin-bottom: 2.5rem; /* mb-10 */
        }
        #restart-btn {
            background-color: #2563eb; /* bg-blue-600 */
            color: #ffffff; /* text-white */
            font-weight: 700; /* font-bold */
            padding: 0.5rem 1.5rem; /* py-2 px-6 */
            border-radius: 0.5rem; /* rounded-lg */
            font-size: 1rem; /* text-base */
            transition-property: all;
            transition-duration: 300ms;
        }
        #restart-btn:hover {
            background-color: #1d4ed8; /* hover:bg-blue-700 */
        }
        #results-screen h3 {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 600; /* font-semibold */
            color: #1f2937; /* text-gray-800 */
            margin-bottom: 1.5rem; /* mb-6 */
            border-bottom: 1px solid #e5e7eb; /* border-b */
            padding-bottom: 0.5rem; /* pb-2 */
        }
        #review-container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem; /* space-y-6 */
            max-height: 60vh;
            overflow-y: auto;
            padding-right: 0.5rem; /* pr-2 */
        }
        .review-question {
            margin-bottom: 0.5rem; /* mb-2 */
            font-size: 1.125rem; /* text-lg */
            font-weight: 600; /* font-semibold */
        }
        .review-answer-incorrect {
            padding: 0.75rem; /* p-3 */
            border-radius: 0.375rem; /* rounded-md */
            background-color: #fee2e2; /* bg-red-100 */
            color: #b91c1c; /* text-red-700 */
        }
        .review-answer-correct {
            padding: 0.75rem; /* p-3 */
            border-radius: 0.375rem; /* rounded-md */
            background-color: #dcfce7; /* bg-green-100 */
            color: #15803d; /* text-green-700 */
        }

        /* --- Responsive Media Queries (Mobile-First) --- */

        /* Small breakpoint (sm: 640px) */
        @media (min-width: 640px) {
            /* Start Screen */
            #start-screen h1 {
                font-size: 2.25rem; /* sm:text-4xl */
            }
            #start-screen p {
                font-size: 1.125rem; /* sm:text-lg */
            }
            .assignment-grid {
                grid-template-columns: repeat(3, minmax(0, 1fr)); /* sm:grid-cols-3 */
            }
            .start-btn-large { /* Modifier for the "All Questions" button */
                padding: 1rem 1.5rem; /* sm:py-4 sm:px-6 */
                font-size: 1.125rem; /* sm:text-lg */
            }

            /* Quiz Screen */
            .quiz-header {
                flex-direction: row; /* sm:flex-row */
                justify-content: space-between;
                align-items: center; /* sm:items-center */
            }
            #quiz-title {
                margin-bottom: 0; /* sm:mb-0 */
            }
            .quiz-stats {
                justify-content: flex-end; /* sm:justify-end */
                gap: 1.5rem; /* sm:gap-6 */
            }
            .stat-item {
                font-size: 1.125rem; /* sm:text-lg */
            }
            #question-text-container {
                font-size: 1.25rem; /* sm:text-xl */
                min-height: 100px;
            }
            #options-container {
                gap: 1rem; /* sm:space-y-4 */
            }
            .option-label {
                padding: 1.25rem; /* sm:p-5 */
            }
            .button-nav {
                margin-top: 2.5rem; /* sm:mt-10 */
                gap: 1rem; /* sm:space-x-4 */
            }
            .nav-buttons-right {
                gap: 1rem; /* sm:space-x-4 */
            }
            #quit-btn, .nav-btn {
                padding: 0.75rem 1.5rem; /* sm:py-3 sm:px-6 */
                font-size: 1.125rem; /* sm:text-lg */
            }
            #next-btn {
                padding: 0.75rem 2.5rem; /* sm:py-3 sm:px-10 */
            }
            
            /* Results Screen */
            #results-screen h2 {
                font-size: 2.25rem; /* sm:text-4xl */
            }
            #results-screen p {
                font-size: 1.5rem; /* sm:text-2xl */
            }
            #restart-btn {
                padding: 0.75rem 2rem; /* sm:py-3 sm:px-8 */
                font-size: 1.125rem; /* sm:text-lg */
            }
        }
        
        /* Medium breakpoint (md: 768px) */
        @media (min-width: 768px) {
            #start-screen,
            #quiz-screen,
            #results-screen {
                padding: 3rem; /* md:p-12 */
            }
            
            #start-screen h1 {
                font-size: 3rem; /* md:text-5xl */
            }
            .assignment-grid {
                grid-template-columns: repeat(4, minmax(0, 1fr)); /* md:grid-cols-4 */
            }

            #question-text-container {
                font-size: 1.5rem; /* md:text-2xl */
            }
        }


        /* --- Original Custom Radio Button Styles --- */
        .option-radio:checked + label {
            background-color: #3b82f6; 
            color: #ffffff; 
            border-color: #2563eb; 
        }
        .option-radio {
            display: none; 
        }
        
        .option-radio:disabled + label {
            color: #6b7280; 
            cursor: not-allowed;
        }
        
        label.feedback-correct {
            background-color: #dcfce7; 
            border-color: #22c55e !important; 
            color: #15803d; 
            font-weight: 600; 
        }
        label.feedback-incorrect {
            background-color: #fee2e2; 
            border-color: #ef4444 !important; 
            color: #b91c1c; 
            font-weight: 600; 
        }
        
        .option-radio:checked + label.feedback-correct,
        .option-radio:checked + label.feedback-incorrect {
             color: #1f2937; 
        }
        .option-radio:checked + label.feedback-correct {
             background-color: #bbf7d0; 
             color: #15803d;
        }
        .option-radio:checked + label.feedback-incorrect {
             background-color: #fecaca; 
             color: #b91c1c;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-900 flex items-center justify-center min-h-screen p-4">

    <div class="quiz-container">
        
        <div id="start-screen">
            <h1>Distributed Systems Quiz</h1>
            <p>
                Select a quiz to start. You will get immediate feedback for each answer.
            </p>
            
            <h2>Assignments</h2>
            <div class="assignment-grid">
            </div>

            <h2>Full Quiz</h2>
            <button class="start-btn start-btn-large" data-quiz-id="all">
                All 120 Questions
            </button>
        </div>

        <div id="quiz-screen" class="hidden">
            <div class="quiz-header">
                <h2 id="quiz-title">Quiz Title</h2>
                <div class="quiz-stats">
                    <div class="stat-item">Question <span id="question-number"></span>/<span id="total-questions"></span></div>
                    <div class="stat-item">Score: <span id="score">0</span></div>
                </div>
            </div>

            <div id="question-text-container"></div>

            <div id="options-container">
            </div>

            <div class="button-nav">
                <button id="quit-btn">
                    Quit
                </button>
                <div class="nav-buttons-right">
                    <button id="prev-btn" class="nav-btn hidden">
                        Previous
                    </button>
                    <button id="next-btn" class="nav-btn">
                        Submit Answer
                    </button>
                </div>
            </div>
        </div>

        <div id="results-screen" class="hidden">
            <h2>Quiz Complete!</h2>
            <p>
                Your Final Score: <span id="final-score"></span>
            </p>

            <div class="restart-container">
                <button id="restart-btn">
                    Take Another Quiz
                </button>
            </div>

            <h3>Review Incorrect Answers</h3>
            <div id="review-container">
            </div>
        </div>
    </div>

    <script>
        const quizData = {
            assignment1: [
                { question: "In a rumor mongering algorithm, there is a/an ____ relationship between the traffic and the residue.", options: ["exponential", "logarithmic", "linear", "quadratic"], correctAnswer: "exponential" },
                { question: "Which of the following statements is/are correct regarding the rumor mongering protocol?\nS1: There is a chance that updates might not reach a node\nS2: It has a built-in termination protocol.", options: ["S1 is true and S2 is true", "S1 is true and S2 is false", "S1 is false and S2 is true", "S1 is false and S2 is false"], correctAnswer: "S1 is true and S2 is true" },
                { question: "In the anti-entropy algorithm, if the number of infected nodes in the system is high, then a________ based algorithm is preferred.", options: ["push", "pull", "push-pull", "pull-push"], correctAnswer: "pull" },
                { question: "In an epidemic protocol, a/an ____ node has not received the update.", options: ["infective", "removed", "injured", "susceptible"], correctAnswer: "susceptible" },
                { question: "Assume an anti-entropy algorithm that distributes an update across ‘n’ nodes. Any node can contact any other node. How much time does this take (approximately, asymptotically)?", options: ["O(n)", "O(log(n))", "O(n2)", "O(n3)"], correctAnswer: "O(log(n))" },
                { question: "Consider the following statements.\nS1: In Napster, a client can provide fake details such as IP addresses.\nS2: In Napster, the main coordination entity handles incoming connections from peers.", options: ["S1 is true and S2 is true", "S1 is true and S2 is false", "S1 is false and S2 is true", "S1 is false and S2 is false"], correctAnswer: "S1 is false and S2 is false" },
                { question: "In Gnutella, the ____ entity manages connections with other Gnutella peers.", options: ["Connection handler", "Co-ordination instance", "Download instance", "Upload instance"], correctAnswer: "Connection handler" },
                { question: "The co-ordination instance in Gnutella sends the ____ message back to the original client after updating the local database with information about remote peers.", options: ["ping", "pong", "search", "client push"], correctAnswer: "pong" },
                { question: "In Napster, a client connects to a/the ____ broker.", options: ["Least busy", "Geographically nearest", "Popular", "Random"], correctAnswer: "Least busy" },
                { question: "Which of the following statements is/are incorrect?", options: ["Gnutella is resilient to network partitions.", "Napster ensures load balancing by finding the best broker.", "Gnutella is scalable due to its distributed architecture.", "None of the options"], correctAnswer: "Gnutella is scalable due to its distributed architecture." }
            ],
            assignment2: [
                { question: "Consider the following statements regarding distributed hash tables (DHTs).\nS1: DHTs provide immunity against node failures due to the usage of extensive data replication.\nS2: DHTs utilizes a dedicated central server to scale with the number of users.", options: ["S1 is true, S2 is false", "S1 is true, S2 is true", "S1 is false, S2 is false", "S1 is false, S2 is true"], correctAnswer: "S1 is true, S2 is false" },
                { question: "The configuration parameter b in the Pastry network affects:", options: ["The number of non-empty entries in the routing table only.", "The number of hops required only.", "The number of non-empty entries in the routing table AND the number of required hops.", "None of the options."], correctAnswer: "The number of non-empty entries in the routing table AND the number of required hops." },
                { question: "While routing a request in Pastry, if the hash of the key (K) is in the range of the node's leaf set (L), then ________.", options: ["forward K to Li such that |K - Li| is minimal.", "forward K to Li such that |K - Li| is maximal.", "forward K to Li such that |K - Li| is negative.", "forward K to any random Li."], correctAnswer: "forward K to Li such that |K - Li| is minimal." },
                { question: "Which of the following is/are the design goals of Freenet?", options: ["Anonymity", "Deniability", "Reliability", "All the options."], correctAnswer: "All the options." },
                { question: "In Freenet, if the insertion of a file leads to a hash collision, then _______.", options: ["it drops the file.", "it passes data back to the upstream requester.", "it passes data to its neighbors.", "it sends data to a subset of nodes from its neighbors."], correctAnswer: "it passes data back to the upstream requester." },
                { question: "Consider the following statements regarding Freenet.\nS1: Information about newly inserted files takes a considerable amount of time to spread across nodes.\nS2: Newly inserted files are placed on nodes with similar keys.", options: ["S1 is true, S2 is false", "S1 is true, S2 is true", "S1 is false, S2 is false", "S1 is false, S2 is true"], correctAnswer: "S1 is false, S2 is true" },
                { question: "In the pre-routing mechanism, a message is encrypted with the _________.", options: ["last node’s private key", "successive node’s public key", "sender's public key", "sender's private key"], correctAnswer: "successive node’s public key" },
                { question: "If a requester receives a Reply.Restart message from downstream nodes in Freenet, then _______.", options: ["It extends its timer.", "It shortens its timer.", "It infers failure.", "It resends the request."], correctAnswer: "It extends its timer." },
                { question: "Which of the following statements is (are) correct regarding the TTL (time-to-live) field in Freenet?", options: ["To reduce the network load, the TTL field can be dynamically decreased.", "Nodes consider the TTL field while deciding the next request to process.", "The TTL field is decremented at every hop", "All the options"], correctAnswer: "All the options" },
                { question: "Which of the following entities is (are) part of the structure of a Pastry node?", options: ["A routing table", "A neighborhood Table", "A leaf set", "All of the options"], correctAnswer: "All of the options" }
            ],
            assignment3: [
                { question: "A _______ maintains a list of peers that contain the different pieces of a file in a BitTorrent network.", options: ["torrent table", "tracker", "swarm", "None of the options"], correctAnswer: "tracker" },
                { question: "Which of the following strategies is employed by the BitTorrent protocol, while downloading a file? [Choose the most appropriate answer]", options: ["A sender will preferentially send data to the nodes that are alive in the network for a longer duration of time.", "A sender prioritizes traffic for those nodes whose network bandwidth is higher.", "A sender will preferentially send data to the nodes that have sent it data in the past.", "All of the options."], correctAnswer: "A sender will preferentially send data to the nodes that have sent it data in the past." },
                { question: "Consider the following statements about the Chord DHT.\nS1: It is not fully distributed.\nS2: It is based on the consistent hashing technique.", options: ["S1 is correct, S2 is incorrect.", "S1 is incorrect, S2 is correct.", "Both S1 and S2 are correct.", "Both S1 and S2 are incorrect."], correctAnswer: "S1 is incorrect, S2 is correct." },
                { question: "In general, the path length in the Chord DHT _______ with the number of nodes.", options: ["grows", "shrinks", "remains the same", "may grow or shrink"], correctAnswer: "grows" },
                { question: "Which of the following tasks is performed by Chord when a node n joins the network? [Choose the most appropriate answer]", options: ["Initialize the predecessor and fingers of node n.", "Update the fingers and predecessors of existing nodes to reflect the addition of n.", "Notify the higher layer software so that it can transfer states (e.g., values) associated with keys that the node is now responsible for.", "All of the options"], correctAnswer: "All of the options" },
                { question: "A Chord node requires information about at least ____ other nodes for efficient routing in an N-node system.", options: ["O(N)", "O(N/2)", "O(log(N))", "O(log(N)2)"], correctAnswer: "O(log(N))" },
                { question: "If a and b are two events and Va and Vb represent the corresponding vector times of these events (using a vector clock), what can be said about the relation between a and b when (Va ≰ Vb) ∧ (Va ≱ Vb)?", options: ["a happens before b (a → b)", "b happened before a (b → a)", "a and b are concurrent (a ⋈ b)", "There is no explicit relation."], correctAnswer: "a and b are concurrent (a ⋈ b)" },
                { question: "In the happens-before-relationship scheme, when process j receives an event a from process i, the clock is updated to _______, where τj and τi are the clocks of process j and i, respectively.", options: ["τj = max(τj + τi (a)) + 1", "τj = τj + 1", "τj = τi (a)", "τj = τi (a) + 1"], correctAnswer: "τj = max(τj + τi (a)) + 1" },
                { question: "Assume that the sender sends a request to a receiver at its local time (t=10), the receiver receives the request at its local time (t=20) and sends a reply at its local time (t=25). The sender receives the reply at its local time (t = 15). Using Cristian’s algorithm, the drift is __ units.", options: ["10 units.", "5 units.", "15 units", "20 units"], correctAnswer: "10 units." },
                { question: "What is a server in the BitTorrent network that hosts a new file and distributes its torrent descriptor file called?", options: ["Leecher", "Peer", "Seeder", "Tracker"], correctAnswer: "Seeder" }
            ],
            assignment4: [
                { question: "Consider the following statements regarding the Chang-Roberts algorithm:\nS1: The number of nodes taking part in the leader election is known a priori.\nS2: Each node is uniquely numbered.", options: ["Both S1 and S2 are true.", "S1 is true, but S2 is false.", "S1 is false, but S2 is true.", "S1 and S2 are both false."], correctAnswer: "S1 is false, but S2 is true." },
                { question: "In the Chang-Robert's leader election algorithm, if node p with state find, receives a message q from its neighbor such that if _______, then it changes the state to lost.", options: ["q = p", "q > p", "q < p", "All the options"], correctAnswer: "q < p" },
                { question: "In the Chang-Robert's algorithm, the message of the leader will propagate across ____ nodes in the ring.", options: ["log(n)", "n", "n-k", "sqrt(n)"], correctAnswer: "n" },
                { question: "In the optimized leader election algorithm with time complexity O(n (log n)), if a node receives (probe, j, k, d) from left such that j < id and d = 2k, then send _____,.", options: ["(probe, j, k, d+1) to right", "(probe, j, k+1, d) to right", "(reply, j, k) to left", "(reply, j, k+1) to right"], correctAnswer: "(reply, j, k) to left" },
                { question: "In a tree-based leader election mechanism, at most _______ messages are sent on every edge.", options: ["Two", "Four", "Eight", "One"], correctAnswer: "Four" },
                { question: "In the Ricart-Agarwala algorithm, a process replies to all pending requests after it _______ the lock.", options: ["releases", "requests", "acquires", "acknowledges."], correctAnswer: "releases" },
                { question: "In the Maekawa’s algorithm, when a process Pj receives a relinquish message from process Pk, it signifies that _________.", options: ["Pk has a low priority.", "Pk has released the lock.", "Pk has received a failed message.", "Pk has not yet acquired the lock."], correctAnswer: "Pk has received a failed message." },
                { question: "In the Suzuki-Kasami algorithm, process Pj sends the token to Pi, if ______.", options: ["seqi[j] = C[i] + 1", "seqj[i] = C[j] + 1", "seqi[j] = C[j] + 1", "seqj[i] = C[i] + 1"], correctAnswer: "seqj[i] = C[i] + 1" },
                { question: "In the Raymond’s tree algorithm, the token is with the ___ of the tree.", options: ["one of the internal node", "one of the leaf node", "root", "random node"], correctAnswer: "root" },
                { question: "Which of the following statements are correct regarding the Raymond’s tree algorithm?\nS1: Circular wait cannot occur because all the nodes wait on the node that holds the token.\nS2: Messages can get lost because all the time a token is held by the root node of the tree.", options: ["S1 is false and S2 is true.", "S1 is true and S2 is false.", "S1 is true and S2 is true.", "S1 is false and S2 is false."], correctAnswer: "S1 is true and S2 is false." }
            ],
            assignment5: [
                { question: "Consider the following statements regarding the minimum spanning tree (MST):\nS1: If each edge of the graph has a unique weight, then the MST is unique.\nS2: If F is a fragment and e is the least weight outgoing edge, then F ∪ e is also a fragment.", options: ["Both S1 and S2 are true.", "S1 is true, but S2 is false.", "S1 is false, but S2 is true.", "S1 and S2 are both false."], correctAnswer: "Both S1 and S2 are true." },
                { question: "In the Gallager Humblet Spira (GHS) algorithm, a fragment joins another fragment by identifying its ______ weight ______ edge.", options: ["least, incoming", "highest, incoming", "highest, outgoing", "least, outgoing"], correctAnswer: "least, outgoing" },
                { question: "When combining two fragments F1 and F2, all the nodes in F1 take on the name and level of F2 if __________.", options: ["level(F1) < level(F2)", "level(F1) > level(F2)", "level(F1) = level(F2)", "All the options"], correctAnswer: "level(F1) < level(F2)" },
                { question: "If a node p receives a < test, level’, name’ > message from node q such that name(p) = name’ and status[q] = basic, then status[q] is set to ____.", options: ["basic", "reject", "branch", "previous value"], correctAnswer: "reject" },
                { question: "In the GHS algorithm, at every level, a node receives ___ messages."
                // ... (The user's provided code was cut off here, so I've kept it as-is)
            ]
            // ... (The user's provided code was cut off here)
        };
        
        // Add all questions to quizData
        quizData.all = [
            ...quizData.assignment1,
            ...quizData.assignment2,
            ...quizData.assignment3,
            ...quizData.assignment4,
            ...quizData.assignment5
        ];

        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultsScreen = document.getElementById('results-screen');
        
        const quizTitleEl = document.getElementById('quiz-title');
        const questionNumberEl = document.getElementById('question-number');
        const totalQuestionsEl = document.getElementById('total-questions');
        const scoreEl = document.getElementById('score');
        const questionTextContainer = document.getElementById('question-text-container');
        const optionsContainer = document.getElementById('options-container');
        
        const quitBtn = document.getElementById('quit-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        
        const finalScoreEl = document.getElementById('final-score');
        const restartBtn = document.getElementById('restart-btn');
        const reviewContainer = document.getElementById('review-container');
        const assignmentButtonsContainer = document.querySelector('.assignment-grid');

        let currentQuiz = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];
        let questionsAnswered = [];

        function init() {
            // Populate assignment buttons
            Object.keys(quizData).forEach(key => {
                if (key === 'all') return;
                const button = document.createElement('button');
                const assignmentName = key.replace('assignment', 'Assignment ');
                button.innerText = assignmentName;
                // JS CHANGE: Removed Tailwind classes, using only 'start-btn'
                button.className = 'start-btn'; 
                button.dataset.quizId = key;
                assignmentButtonsContainer.appendChild(button);
            });

            startScreen.addEventListener('click', e => {
                if (e.target.classList.contains('start-btn')) {
                    const quizId = e.target.dataset.quizId;
                    startQuiz(quizId);
                }
            });

            nextBtn.addEventListener('click', handleNextButton);
            prevBtn.addEventListener('click', showPreviousQuestion);
            quitBtn.addEventListener('click', showStartScreen);
            restartBtn.addEventListener('click', showStartScreen);
        }

        function startQuiz(quizId) {
            const quizName = quizId === 'all' ? 'All Questions' : quizId.replace('assignment', 'Assignment ');
            currentQuiz = quizData[quizId];
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = new Array(currentQuiz.length).fill(null);
            questionsAnswered = new Array(currentQuiz.length).fill(false);
            
            quizTitleEl.innerText = quizName;
            totalQuestionsEl.innerText = currentQuiz.length;

            showQuestion(currentQuestionIndex);
            
            startScreen.classList.add('hidden');
            resultsScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
        }
        
        function showQuestion(index) {
            const question = currentQuiz[index];
            questionTextContainer.innerText = question.question.replace(/\\n/g, '\n');
            optionsContainer.innerHTML = '';

            question.options.forEach((option, i) => {
                const optionId = `q${index}_option${i}`;
                
                const optionRadio = document.createElement('input');
                optionRadio.type = 'radio';
                optionRadio.id = optionId;
                optionRadio.name = `question${index}`;
                optionRadio.value = option;
                optionRadio.className = 'option-radio';
                if (userAnswers[index] === option) {
                    optionRadio.checked = true;
                }
                if (questionsAnswered[index]) {
                    optionRadio.disabled = true;
                }
                
                const optionLabel = document.createElement('label');
                optionLabel.htmlFor = optionId;
                // JS CHANGE: Removed Tailwind classes, using only 'option-label'
                optionLabel.className = 'option-label'; 
                optionLabel.innerText = option;

                if (questionsAnswered[index]) {
                    if (option === question.correctAnswer) {
                        optionLabel.classList.add('feedback-correct');
                    } else if (option === userAnswers[index]) {
                        optionLabel.classList.add('feedback-incorrect');
                    }
                }
                
                optionsContainer.appendChild(optionRadio);
                optionsContainer.appendChild(optionLabel);
            });

            questionNumberEl.innerText = index + 1;
            scoreEl.innerText = score;
            
            prevBtn.classList.toggle('hidden', index === 0);
            
            if (questionsAnswered[index]) {
                nextBtn.innerText = 'Next Question';
            } else {
                nextBtn.innerText = 'Submit Answer';
            }
            
            if (currentQuestionIndex === currentQuiz.length - 1 && questionsAnswered[index]) {
                nextBtn.innerText = 'Show Results';
            }
        }
        
        function handleNextButton() {
            if (!questionsAnswered[currentQuestionIndex]) {
                submitAnswer();
            } else {
                showNextQuestion();
            }
        }

        function submitAnswer() {
            const selectedOption = optionsContainer.querySelector('input[type="radio"]:checked');
            if (!selectedOption) return; 

            const answer = selectedOption.value;
            userAnswers[currentQuestionIndex] = answer;
            questionsAnswered[currentQuestionIndex] = true;
            
            const question = currentQuiz[currentQuestionIndex];
            const labels = optionsContainer.querySelectorAll('label');
            const radios = optionsContainer.querySelectorAll('input[type="radio"]');
            
            radios.forEach(radio => radio.disabled = true);

            labels.forEach(label => {
                const radio = document.getElementById(label.htmlFor);
                if (radio.value === question.correctAnswer) {
                    label.classList.add('feedback-correct');
                } else if (radio.checked) {
                    label.classList.add('feedback-incorrect');
                }
            });
            
            if (answer === question.correctAnswer) {
                score++;
            }
            
            scoreEl.innerText = score;
            
            if (currentQuestionIndex === currentQuiz.length - 1) {
                nextBtn.innerText = 'Show Results';
            } else {
                nextBtn.innerText = 'Next Question';
            }
        }
        
        function showNextQuestion() {
            if (currentQuestionIndex < currentQuiz.length - 1) {
                currentQuestionIndex++;
                showQuestion(currentQuestionIndex);
            } else {
                showResults();
            }
        }
        
        function showPreviousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion(currentQuestionIndex);
            }
        }
        
        function showResults() {
            finalScoreEl.innerText = `${score} / ${currentQuiz.length}`;
            reviewContainer.innerHTML = '';
            
            let reviewHtml = '';
            currentQuiz.forEach((q, index) => {
                if (userAnswers[index] !== q.correctAnswer) {
                    // JS CHANGE: Using custom classes instead of Tailwind
                    reviewHtml += `<div class="review-item">`;
                    reviewHtml += `  <div class="review-question">${q.question.replace(/\\n/g, '<br>')}</div>`;
                    if (userAnswers[index]) {
                        reviewHtml += `  <div class="review-answer-incorrect">Your answer: ${userAnswers[index]}</div>`;
                    }
                    reviewHtml += `  <div class="review-answer-correct">Correct answer: ${q.correctAnswer}</div>`;
                    reviewHtml += `</div>`;
                }
            });
            
            reviewContainer.innerHTML = reviewHtml || '<p>No incorrect answers to review. Great job!</p>';
            
            quizScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
        }

        function showStartScreen() {
            resultsScreen.classList.add('hidden');
            quizScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
        }

        init();
    </script>
</body>
</html>
